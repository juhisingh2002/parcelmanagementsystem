<div class="register-container">
  <div class="register-form">
    <h1 class="register-title">Register</h1>
    
    <form [formGroup]="registerForm" (ngSubmit)="onRegister()" *ngIf="!registrationSuccess">
      <!-- Personal Information Section -->
      <div class="section-header">
        <h2>Personal Information</h2>
      </div>

      <div class="form-group">
        <label class="form-label">Customer Name</label>
        <input 
          type="text" 
          class="form-input" 
          formControlName="name" 
          maxlength="50"
        />
        <div class="error-message" *ngIf="registerForm.get('name')?.hasError('required') && registerForm.get('name')?.touched">
          Customer name is required
        </div>
        <div class="error-message" *ngIf="registerForm.get('name')?.hasError('maxlength') && registerForm.get('name')?.touched">
          Customer name cannot exceed 50 characters
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Email</label>
        <input 
          type="email" 
          class="form-input" 
          formControlName="email"
        />
        <div class="error-message" *ngIf="registerForm.get('email')?.hasError('required') && registerForm.get('email')?.touched">
          Email is required
        </div>
        <div class="error-message" *ngIf="registerForm.get('email')?.hasError('email') && registerForm.get('email')?.touched">
          Please enter a valid email address
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Mobile number</label>
        <div class="mobile-container">
          <select class="country-code-select" formControlName="countryCode">
            <option value="+1">+1</option>
            <option value="+91">+91</option>
            <option value="+44">+44</option>
            <option value="+61">+61</option>
            <option value="+81">+81</option>
          </select>
          <input 
            type="tel" 
            class="mobile-input" 
            formControlName="mobile" 
            placeholder="Phone number"
            maxlength="10"
          />
        </div>
        <div class="error-message" *ngIf="registerForm.get('mobile')?.hasError('required') && registerForm.get('mobile')?.touched">
          Mobile number is required
        </div>
        <div class="error-message" *ngIf="registerForm.get('mobile')?.hasError('pattern') && registerForm.get('mobile')?.touched">
          Please enter a valid 10-digit mobile number
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Address</label>
        <textarea 
          class="form-textarea" 
          formControlName="address"
          rows="4"
          placeholder="Enter complete mailing address including ZIP code and Postal code"
        ></textarea>
        <div class="error-message" *ngIf="registerForm.get('address')?.hasError('required') && registerForm.get('address')?.touched">
          Address is required
        </div>
      </div>

      <!-- Password Section -->
      <div class="section-header">
        <h2>Password</h2>
      </div>

      <div class="form-group">
        <label class="form-label">Password</label>
        <input 
          type="password" 
          class="form-input" 
          formControlName="password" 
          placeholder="ConfirmPassword"
          maxlength="30"
        />
        <div class="error-message" *ngIf="registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched">
          Password is required
        </div>
        <div class="error-message" *ngIf="registerForm.get('password')?.hasError('maxlength') && registerForm.get('password')?.touched">
          Password cannot exceed 30 characters
        </div>
        <div class="error-message" *ngIf="registerForm.get('password')?.hasError('pattern') && registerForm.get('password')?.touched">
          Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Confirm Password</label>
        <input 
          type="password" 
          class="form-input" 
          formControlName="confirmPassword"
          placeholder="Confirm Password"
          maxlength="30"
        />
        <div class="error-message" *ngIf="registerForm.get('confirmPassword')?.hasError('required') && registerForm.get('confirmPassword')?.touched">
          Please confirm your password
        </div>
        <div class="error-message" *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched">
          Passwords do not match
        </div>
      </div>

      <!-- Preferences Section -->
      <div class="form-group">
        <textarea 
          class="form-textarea preferences-textarea" 
          formControlName="preferences"
          rows="3"
          placeholder="Specify any preferences related to mail delivery, notifications, or other"
        ></textarea>
      </div>

      <div class="button-group">
        <button type="submit" class="register-button" [disabled]="!registerForm.valid">
          Register
        </button>
        <button type="button" class="reset-button" (click)="onReset()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
            <path d="M3 21v-5h5"/>
          </svg>
        </button>
      </div>

      <p class="login-link">
      Already an existing user? <a routerLink="/login">Login</a>
      </p>

    </form>

    

    <!-- Registration Success Screen -->
    <div class="acknowledgment" *ngIf="registrationSuccess">
      <div class="success-message">
        <h3>Customer Registration successful.</h3>
      </div>
      <div class="customer-details">
        <p><strong>Customer ID:</strong> {{generatedId}}</p>
        <p><strong>Customer Name:</strong> {{customerData.name}}</p>
        <p><strong>Email:</strong> {{customerData.email}}</p>
      </div>
      <button type="button" class="back-button" (click)="goBackToForm()">
        Register Another Customer
      </button>
    </div>
  </div>
</div>